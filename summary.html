<!DOCTYPE html>
<html>
<head>
  <title>Summary</title>
  <link rel="stylesheet" href="styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b1220">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Work Log">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>

<nav class="nav">
  <a href="index.html">Home</a>
  <a href="enter-shift.html">Enter Shift</a>
  <a href="summary.html">Summary</a>
  <a href="shifts.html">All Shifts</a>
  <a href="companies.html">Companies</a>
  <a href="vehicles.html">Vehicles</a>
  <a href="settings.html">Settings</a>
</nav>

<div class="container">
  <div class="screen">
	<h1>Summary</h1>

	<!-- Segmented control -->
	<div class="segmented" role="tablist" aria-label="Summary period">
	  <button id="tabWeek" class="seg-btn is-active" type="button" onclick="setSummaryTab('week')" role="tab" aria-selected="true">
		This Week
	  </button>
	  <button id="tabMonth" class="seg-btn" type="button" onclick="setSummaryTab('month')" role="tab" aria-selected="false">
		This Month
	  </button>
	</div>

	<!-- WEEK PANEL -->
	<section id="panelWeek" class="section" role="tabpanel" aria-labelledby="tabWeek">
	  <h2>Week (Monâ€“Sun)</h2>
	  <div class="grid" id="thisWeekTiles"></div>

	  <div class="button-row">
		<button onclick="exportPayslip('week')">Export Week Payslip (PDF)</button>
		<button class="button-secondary" onclick="exportSection('weeklySummary')">Export Weekly (Simple)</button>
	  </div>

	  <details class="details" style="margin-top:14px;">
		<summary>Weekly breakdown</summary>
		<div style="margin-top:12px;">
		  <div id="weeklySummary"></div>
		</div>
	  </details>
	</section>

	<!-- MONTH PANEL -->
	<section id="panelMonth" class="section" role="tabpanel" aria-labelledby="tabMonth" style="display:none;">
	  <h2 id="summaryPeriodLabel">Month</h2>
	  <div class="segmented" role="tablist" aria-label="Pay period mode">
		<button id="periodMonthBtn" class="seg-btn is-active" type="button" onclick="setSummaryPeriodMode('month')">Monthly</button>
		<button id="periodFourWeekBtn" class="seg-btn" type="button" onclick="setSummaryPeriodMode('four_week')">4-Weekly</button>
	  </div>
	  <div class="grid" id="thisMonthTiles"></div>

	  <div class="button-row">
		<button id="exportSummaryPeriodBtn" onclick="exportPayslip('month')">Export Month Payslip (PDF)</button>
		<button class="button-secondary" onclick="exportSection('monthlySummary')">Export Monthly (Simple)</button>
	  </div>

	  <details class="details" style="margin-top:14px;">
		<summary id="monthlyBreakdownSummary">Monthly breakdown</summary>
		<div style="margin-top:12px;">
		  <div id="monthlySummary"></div>
		</div>
	  </details>
	</section>

	<div class="section">
	  <h2>Leave & Sickness</h2>
	  <div id="leaveStats"></div>
	</div>

	<div class="section">
	  <h2>By Company</h2>
	  <div id="companySummary"></div>
	</div>

	<div class="section">
	  <details class="details">
		<summary>Backup & restore</summary>
		<div style="margin-top:12px;">
		  <button class="button-secondary" onclick="downloadBackup()">Download Backup</button>
		  <label style="margin-top:12px;">Restore backup</label>
		  <input type="file" id="restoreFile" onchange="restoreBackup(event)">
		</div>
	  </details>
	</div>

  </div>
</div>

<script src="app.js"></script>
</body>
</html>
