<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
  <title>HGV Work Log</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b1220">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Work Log">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>

<nav class="nav">
  <a href="index.html" class="nav-home" aria-label="Home">⌂</a>
  <button id="navMenuBtn" class="nav-menu-btn" type="button" aria-expanded="false" aria-controls="navMenu" aria-label="Open navigation">☰</button>
  <div id="navMenu" class="nav-menu" hidden>
    <a href="index.html">Home</a>
    <a href="enter-shift.html">Enter Shift</a>
    <a href="summary.html">Summary</a>
    <a href="shifts.html">All Shifts</a>
    <a href="companies.html">Companies</a>
    <a href="vehicles.html">Vehicles</a>
    <a href="settings.html">Settings</a>
    <a href="user-guide.html">User Guide</a>
  </div>
</nav>

<div class="container">
  <div class="screen">
    <h1>HGV Work Log</h1>
    <h2>Add / Edit Shift</h2>

    <label>Company</label>
    <select id="company"></select>
    <div class="small" style="margin-top:6px;">
      Company settings (rate, overtime, mins) will be used unless you override them below.
    </div>

    <label>Shift Type</label>
    <select id="shiftType">
      <option value="day">Day shift</option>
      <option value="night">Night shift</option>
    </select>

    <label>Date</label>
    <input type="date" id="date">

    <div class="grid">
      <div>
        <label>Start Time</label>
        <input type="time" id="start">
      </div>
      <div>
        <label>Finish Time</label>
        <input type="time" id="finish">
      </div>
    </div>

    <div id="shiftVehicleRow">
      <label>Vehicle</label>
      <div class="combo-wrap" id="vehicleComboWrap">
        <input type="text" id="vehicle" placeholder="Registration" autocomplete="off">
        <div id="vehicleMenu" class="combo-menu" hidden></div>
      </div>
    </div>

    <div id="shiftTrailerRows">
      <label>Trailer 1</label>
      <input type="text" id="trailer1">

      <label>Trailer 2</label>
      <input type="text" id="trailer2">
    </div>

    <div id="shiftMileageRows">
      <div class="grid">
        <div>
          <label>Start Mileage</label>
          <input type="number" id="startMileage" min="0" step="1" placeholder="e.g. 124000">
        </div>
        <div>
          <label>Finish Mileage</label>
          <input type="number" id="finishMileage" min="0" step="1" placeholder="e.g. 124320">
        </div>
      </div>

      <label>Mileage Done</label>
      <input type="number" id="mileageDone" min="0" step="1" readonly>
    </div>

    <label>Defects/Notes</label>
    <textarea id="defects"></textarea>

    <div class="checkbox-row">
      <input type="checkbox" id="annualLeave">
      <span>Annual Leave (9 hrs)</span>
    </div>

    <div class="checkbox-row">
      <input type="checkbox" id="sickDay">
      <span>Sick Day (9 hrs)</span>
    </div>

    <div class="checkbox-row">
      <input type="checkbox" id="bankHoliday">
      <span>Bank Holiday</span>
    </div>

    <h2 style="margin-top:16px;">Night Out</h2>
    <div class="checkbox-row">
      <input type="checkbox" id="nightOut">
      <span>Night Out</span>
    </div>
    <div class="small" id="nightOutPayInfo" style="margin-top:8px;"></div>

    <h2 style="margin-top:16px;">Expenses</h2>
    <div class="grid">
      <div>
        <label>Parking (£)</label>
        <input type="number" id="expenseParking" min="0" step="0.01" placeholder="0.00">
      </div>
      <div>
        <label>Road Tolls (£)</label>
        <input type="number" id="expenseTolls" min="0" step="0.01" placeholder="0.00">
      </div>
    </div>

    <!-- Advanced / Overrides -->
    <div class="section" style="margin-top:16px;">
      <div class="week-group" style="margin-top:0;">
        <div class="week-header" onclick="toggleOverrides()">
          <span>Advanced (Overrides)</span>
          <span class="small">Optional</span>
        </div>
        <div class="week-content" id="overridePanel" style="display:none;">

          <label>Override Base Hourly Rate (£)</label>
          <input type="number" step="0.01" id="overrideBaseRate" placeholder="Leave blank to use company">

          <label>Override Break Hours</label>
          <input type="number" step="0.25" id="overrideBreakHours" placeholder="Leave blank to use company">

          <label>Override OT Multiplier (Mon–Fri)</label>
          <input type="number" step="0.01" id="overrideOtWeekday" placeholder="Leave blank to use company">

          <label>Override OT Multiplier (Saturday)</label>
          <input type="number" step="0.01" id="overrideOtSaturday" placeholder="Leave blank to use company">

          <label>Override OT Multiplier (Sunday)</label>
          <input type="number" step="0.01" id="overrideOtSunday" placeholder="Leave blank to use company">

          <label>Override OT Multiplier (Bank Holiday)</label>
          <input type="number" step="0.01" id="overrideOtBankHoliday" placeholder="Leave blank to use company">

          <button class="button-secondary" onclick="clearOverrides()" type="button">Clear Overrides</button>

        </div>
      </div>
    </div>

    <button onclick="addOrUpdateShift()">Save Shift</button>
  </div>
</div>

<script src="app.js"></script>

<script>
  function toggleOverrides(){
    const el = document.getElementById("overridePanel");
    if(!el) return;
    el.style.display = (el.style.display === "none") ? "block" : "none";
  }

  function clearOverrides(){
    const ids = [
      "overrideBaseRate","overrideBreakHours",
      "overrideOtWeekday","overrideOtSaturday","overrideOtSunday","overrideOtBankHoliday"
    ];
    ids.forEach(id=>{
      const el = document.getElementById(id);
      if(el) el.value = "";
    });
  }
</script>

</body>
</html>
